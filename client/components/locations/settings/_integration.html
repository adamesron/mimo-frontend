<location-settings-nav></location-settings-nav>

<md-content layout-padding layout="row" layout-wrap layout-align="center center" class="page-meta" ng-if="!integration.type">
  <div flex="100" flex-gt-md="60" flex-gt-lg="50">
    <md-card>
      <md-card-title>
        <md-card-title-text>
          <span class="md-headline" translate>
            No Integration Found
          </span>
          <span class="md-subhead">
          </span>
        </md-card-title-text>
      </md-card-title>

      <md-card-content>
        <p>Before you can access your Integration settings you'll need to first create an integration.</p>
        <p>Click the button below and follow the prompts to select and configure your integration.</p>
      </md-card-content>
      <md-card-actions layout="row" layout-align="end center">
        <md-button class="md-raised" ng-href="/#/{{ location.slug }}/integration">
          Create Integration
        </md-button>
      </md-card-actions>
    </md-card>
  </div>
</md-content>

<md-content layout-padding layout="row" layout-wrap layout-align="center center" class="page-meta" ng-if="integration.type">
  <div flex="100" flex-gt-md="90" flex-gt-lg="80">
    <div layout="row" layout-align="center center">
      <div flex="100" flex-gt-sm="100">

        <form name="myForm" ng-submit="save(myForm)">
          <md-card>
            <md-card-title>
              <md-card-title-text>
                <span class="md-headline" translate>
                  Integration Details
                </span>
                <span class="md-subhead">
                  Make changes to your auth settings below and revalidate your integration.
                </span>
              </md-card-title-text>
            </md-card-title>

            <md-card-content ng-if="integration.type == 'unifi'">
              <div layout="row" layout-wrap>
                <md-input-container flex="100" flex-gt-sm="40">
                  <label>
                    <translate>Integration Type</translate>
                  </label>
                  <input value="UniFi" disabled></input>
                </md-input-container>
              </div>
              <div layout="row" layout-wrap>
                <md-input-container flex="100" flex-gt-sm="40">
                  <label>
                    <translate>Hostname</translate>
                  </label>
                  <input ng-model="integration.host" name="host" type="url" md-maxlength='255'required></input>
                  <div ng-messages="myForm.host.$error" >
                    <div ng-message="url" translate>Must be a valid URL</div>
                    <div ng-message="required" translate>You must enter a valid URL.</div>
                  </div>
                </md-input-container>
              </div>
              <div layout="row" layout-wrap>
                <md-input-container flex="100" flex-gt-xs="40">
                  <label>
                    <translate>Username</translate>
                  </label>
                  <input ng-model="integration.username" type="text" md-maxlength='255'required></input>
                </md-input-container>
                <span flex-gt-xs="10"></span>
                <md-input-container flex="100" flex-gt-xs="40">
                  <label>
                    <translate>Password</translate>
                  </label>
                  <input ng-model="integration.password" type="password" name="password" ng-minlength="8" md-maxlength='32' ng-pattern="/^[^[\]\'\\]+$/" required></input>
                  <div ng-messages="myForm.password.$error">
                    <div ng-message="md-maxlength">Max 32 characters</div>
                    <div ng-message="minlength">Min 8 characters</div>
                    <div ng-message="required">You must set a password</div>
                    <div ng-message="pattern">Invalid characters in password</div>
                  </div>
                </md-input-container>
              </div>
            </md-card-content>

            <md-card-content ng-if="integration.type == 'vsz'">
              <div layout="row" layout-wrap>
                <md-input-container flex="100" flex-gt-sm="40">
                  <label>
                    <translate>Integration Type</translate>
                  </label>
                  <input value="Ruckus VSZ" disabled></input>
                </md-input-container>
              </div>
              <div layout="row" layout-wrap>
                <md-input-container flex="100" flex-gt-sm="40">
                  <label>
                    <translate>Hostname</translate>
                  </label>
                  <input ng-model="integration.host" name="host" type="url" md-maxlength='255'required></input>
                  <div ng-messages="myForm.host.$error" >
                    <div ng-message="url" translate>Must be a valid URL</div>
                    <div ng-message="required" translate>You must enter a valid URL.</div>
                  </div>
                </md-input-container>
              </div>
              <div layout="row" layout-wrap>
                <md-input-container flex="100" flex-gt-xs="40">
                  <label>
                    <translate>Username</translate>
                  </label>
                  <input ng-model="integration.username" type="text" md-maxlength='255'required></input>
                </md-input-container>
                <span flex-gt-xs="10"></span>
                <md-input-container flex="100" flex-gt-xs="40">
                  <label>
                    <translate>Password</translate>
                  </label>
                  <input ng-model="integration.password" type="password" name="password" ng-minlength="8" md-maxlength='32' ng-pattern="/^[^[\]\'\\]+$/" required></input>
                  <div ng-messages="myForm.password.$error">
                    <div ng-message="md-maxlength">Max 32 characters</div>
                    <div ng-message="minlength">Min 8 characters</div>
                    <div ng-message="required">You must set a password</div>
                    <div ng-message="pattern">Invalid characters in password</div>
                  </div>
                </md-input-container>
              </div>
            </md-card-content>

            <md-card-content ng-if="integration.type == 'meraki'">
              <div layout="row" layout-wrap>
                <md-input-container flex="100" flex-gt-sm="40">
                  <label>
                    <translate>Integration Type</translate>
                  </label>
                  <input value="Cisco Meraki" disabled></input>
                </md-input-container>
              </div>
              <div layout="row" layout-wrap>
                <md-input-container flex="100" flex-gt-sm="100">
                  <label>
                    <translate>API Key</translate>
                  </label>
                  <input ng-model="integration.password" type="password" name="api" md-maxlength='255'required></input>
                  <div ng-messages="myForm.api.$error">
                    <div ng-message="required">You must enter an API Key</div>
                  </div>
                </md-input-container>
              </div>
            </md-card-content>
            <md-card-actions layout="row" layout-align="end center">
              <div>
                <p ng-if="validated == true">Integration Successfully Validated</p>
              </div>
              <div>
                <md-button type="submit" class="md-raised" ng-disabled="myForm.$pristine || myForm.$invalid">
                  Test Integration
                </md-button>
              </div>
            </md-card-actions>
          </md-card>
        </form>

      </div>
    </div>
  </div>
</md-content>
